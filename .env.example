# ===== アプリケーション基本設定 =====
APP_NAME=tuukaa API
APP_VERSION=0.1.0

# デバッグモード（本番環境では必ず false に設定）
DEBUG=false

# ===== OpenAI API =====
# OpenAI API Key（必須）
OPENAI_API_KEY=

# ===== セキュリティ設定 =====
# 管理者用APIシークレット（必須、最低32文字）
# 生成方法: openssl rand -hex 32
ADMIN_API_SECRET=

# 許可するホスト（本番環境で必須、カンマ区切り）
# 例: yourdomain.com,*.yourdomain.com,api.yourdomain.com
ALLOWED_HOSTS=localhost,127.0.0.1

# ===== ベクトルストア設定 =====
PERSIST_DIRECTORY=/app/vectorstore
EMBEDDING_MODEL=text-embedding-3-small

# システムリセット許可（本番環境では false を推奨）
ALLOW_RESET=false

# ===== API設定 =====
HOST=0.0.0.0
PORT=8000
WORKERS=1

# ===== LLM設定 =====
DEFAULT_MODEL=gpt-4o-mini
DEFAULT_TEMPERATURE=0.2
DEFAULT_TOP_K=10
MAX_CHUNK_SIZE=500
CHUNK_OVERLAP=70
DEFAULT_MAX_OUTPUT_TOKENS=2048

# 類似度スコア閾値（ChromaDB L2距離: 小さいほど類似）
SIMILARITY_SCORE_THRESHOLD=1.8

# トークン上限
DEFAULT_CONTEXT_WINDOW_TOKENS=8192
PROMPT_OVERHEAD_TOKENS=512

# ===== ファイルアップロード設定 =====
UPLOAD_DIRECTORY=/app/uploads
MAX_FILE_SIZE=10485760
ALLOWED_EXTENSIONS=pdf

# ===== Redis設定 =====
# Redisパスワード（本番環境では必ず設定）
# 生成方法: openssl rand -hex 32
REDIS_PASSWORD=

# Redis接続URL（REDIS_PASSWORDから自動構築されるため通常は不要）
# REDIS_URL=redis://:your_password@redis:6379/0

# ===== Embed Domain（ウィジェット）設定 =====
# テナント別APIキー（フォーマット: tenant1:key1,tenant2:key2）
# 例: EMBED_API_KEYS=client-a:abc123,client-b:def456
EMBED_API_KEYS=

# CORS許可オリジン（本番環境では必須、カンマ区切り、ワイルドカード禁止）
# 例: https://yourdomain.com,https://app.yourdomain.com
EMBED_ALLOWED_ORIGINS=http://localhost:3000

# コレクション名プレフィックス（オプション）
EMBED_COLLECTION_PREFIX=

# ===== レート制限・予算管理 =====
# RPM制限（リクエスト/分）
RATE_LIMIT_RPM=60

# 日次予算（円）
DAILY_BUDGET_JPY=100.0

# ===== モデル料金設定 =====
# フォーマット: model_name:in=入力単価:out=出力単価（USD/1M tokens）
# OpenAI公式料金: https://openai.com/api/pricing/
MODEL_PRICING=gpt-4o-mini:in=0.15:out=0.60,gpt-4o:in=2.50:out=10.00,gpt-4-turbo:in=10.00:out=30.00

# USD/JPY為替レート
USD_JPY_RATE=148.0